\chapter{Anhang}
\label{anhang}
\addcontentsline{toc}{section}{Herleitungen}
\section*{Herleitungen}
Hier finden sich die Herleitungen zu den Formeln zur Berechnung der mittleren Roundtrip-Times.
\subsection*{Mittlere Roundtrip-Time bei exponentieller Steigerung des $rto$}

Bei der Berechnung der mittleren Roundtrip-Time müssen wir zunächst die möglichen Zeitdifferenzen zwischen den Retransmissionen und Erhalt des Feeds aufsummieren.
$T_1$ bis $T_4$ in der Abbildung \ref{Abb:exp_steigerung_rto} sind als Beispiele die Zeitpunkte der einzelnen Transmissionen bzw. Retransmissionen,
$t_f$ ist der Zeitpunkt, zu dem der Feed den Subscriber erreicht. $i$ ist dabei die Anzahl der Retransmissionen (einschliesslich der ersten Transmission
eines Feed-Requests).

\begin{picturehere}{3}{4.5}{\mbox{exp. Steigerung des $rto$}}{Abb:exp_steigerung_rto}
 
\begin{picture}(7,1)(1.5,-2.5)
  \put(0,0){\vector(1,0){9}}
  \put(0,-0.2){\line(0,1){0.4}}
  \put(0,-0.5){$T_1$}
  \put(1,-0.2){\line(0,1){0.4}}
  \put(1,-0.5){$T_2$}
  \put(3,-0.2){\line(0,1){0.4}}
  \put(3,-0.5){$T_3$}
  \put(7,-0.2){\line(0,1){0.4}}
  \put(7,-0.5){$T_4$}
  \put(8,-0.2){\line(0,1){0.4}}
  \put(8,-0.5){$t_f$}
  \put(7,0.3){$\overbrace{\hspace{1cm}}^{\varDelta t}$}
  \put(3,-0.65){$\underbrace{\hspace{5cm}}_{cpp*2^{i-1}+\varDelta t}$}
  \put(1,0.9){$\overbrace{\hspace{7cm}}^{cpp*2^{i-2}+cpp*2^{i-1}+\varDelta t}$}
  \put(0,-1.25){$\underbrace{\hspace{8cm}}_{cpp*2^{i-3}+cpp*2^{i-2}+cpp*2^{i-1}+\varDelta t}$}
  \put(9.8,0){$time$}
\end{picture}
\end{picturehere}

Wir erhalten folgende Summe:
\[[\varDelta t]+[\varDelta t+cpp*2^{i-1}]+[\varDelta t+cpp*2^{i-1}+cpp*2^{i-2}]+\dots+[\varDelta t+cpp*2^{i-1}+\dots+cpp*2^1]\]
\[=i*\varDelta t+(i-1)*cpp*2^{i-1}+(i-2)*cpp*2^{(i-2)}+\dots+1*cpp*2^1\]
\[=i*\varDelta t+cpp\sum^{i-1}_{k=1}2^kk.\]

Um den Mittelwert zu erhalten, müssen wir durch $i$ teilen:

\[\frac{i*\varDelta t+cpp\sum^{i-1}_{k=1}2^kk}{i}\]
\[=\frac{cpp\sum^{i-1}_{k=1}2^kk}{i}+\varDelta t.\]

\subsection*{Mittlere Roundtrip-Time bei polynomieller Steigerung des $rto$}
Analog zur Herleitung der mittleren Roundtrip-Time bei exponentieller Steigerung des $rto$ sind die Zeitdifferenzen wie in Abbildung \ref{Abb:poly_steigerung_rto}
dargestellt. Die Koeffizienten sind nun $i\dots 2$ (da bei der ersten Transmission der $rto$ auf $rto:=2*cpp$ gesetzt wird).
\begin{picturehere}{3}{4.5}{\mbox{polyn. Steigerung des $rto$}}{Abb:poly_steigerung_rto}
 
\begin{picture}(7,1)(1.5,-2.5)
  \put(0,0){\vector(1,0){9}}
  \put(0,-0.2){\line(0,1){0.4}}
  \put(0,-0.5){$T_1$}
  \put(1,-0.2){\line(0,1){0.4}}
  \put(1,-0.5){$T_2$}
  \put(3,-0.2){\line(0,1){0.4}}
  \put(3,-0.5){$T_3$}
  \put(6,-0.2){\line(0,1){0.4}}
  \put(6,-0.5){$T_4$}
  \put(8,-0.2){\line(0,1){0.4}}
  \put(8,-0.5){$t_f$}
  \put(6,0.3){$\overbrace{\hspace{2cm}}^{\varDelta t}$}
  \put(3,-0.65){$\underbrace{\hspace{5cm}}_{i*cpp+\varDelta t}$}
  \put(1,0.9){$\overbrace{\hspace{7cm}}^{(i-1)*cpp+i*cpp+\varDelta t}$}
  \put(0,-1.25){$\underbrace{\hspace{8cm}}_{(i-2)*cpp+(i-1)*cpp+i*cpp+\varDelta t}$}
  \put(9.8,0){$time$}
\end{picture}
\end{picturehere}

Die Berechnung der Summe ist wie folgt. Dabei greifen wir auf die Gleichungen
\[\sum^n_{i=1}i=\frac{n(n+1)}{2}\] und \[\sum^n_{i=1}i^2=\frac{n(n+1)(2n+1)}{6}\] zurück:
\[[\varDelta t]+[\varDelta t+i*cpp]+[\varDelta t+i*cpp+(i-1)*cpp]+\dots+[\varDelta t+i*cpp+\dots+2*cpp]\]
\[=i*\varDelta t+cpp\sum^{i-1}_{k=1}k(k+1)\]
\[=i*\varDelta t+cpp\left(\sum^{i-1}_{k=1}k^2+\sum^{i-1}_{k=1}k\right)\]
\[=i*\varDelta t+cpp\left(\frac{(i-1)i(2(i-1)+1)}{6}+\frac{(i-1)i}{2}\right)\]
\[=i*\varDelta t+cpp\left(\frac{i(i-1)(2i-1)+3i(i-1)}{6}\right)\]
\[=i*\varDelta t+cpp\left(\frac{i(i-1)(2i+2)}{6}\right).\]

Als Mittelwert ergibt sich nun:
\[\frac{i*\varDelta t+cpp\left(\frac{i(i-1)(2i+2)}{6}\right)}{i}\]
\[=cpp\left(\frac{(i-1)(2i+2)}{6}\right)+\varDelta t.\]


