\section{Rolle der Broker}
\todo{Literaturangaben}\\
Broker sind der zentrale Bestandteil des Notifikationssystems. Ein Broker empfängt Feeds von Brokern oder von Subscribern.
Anschließend sorgt er für eine Verteilung der
Feeds an eine bestimmte Auswahl von mit ihm verbundenen Brokern bzw. Subscribern. Ein Broker kann also eine zentrale Sammelstelle für Feeds
unterschiedlicher Anbieter sein. Die einzelnen in den Feeds zusammengefassten Ereignisse können durch den Broker neu zusammengestellt werden.
Als Kriterien für neue Zusammenstellungen bieten sich die Aktualität der einzelnen Ereignisse sowie bestimmte Filterregeln an. Einzelne 
Ereignisse, die den Broker bereits erreicht haben, brauchen nicht erneut weitergeleitet zu werden und finden daher nach unserem Konzept keinen
Eingang in die neu zusammengestellten Feeds. Dadurch können Netzresourcen gespart werden. Voraussetzung dafür ist, dass der Broker einen Cache
unterhält, in dem eine bestimmte Menge an Ereignissen zwischengespeichert wird.\\

Filter können durch Subscriber definiert und bei Brokern
hinterlegt werden. Aufgrund der Filterregeln können Ereignisse verschiedener
Anbieter aus den Feeds extrahiert und in einem neuen Feed gesammelt werden. Ein
Subscriber kann also eine individuelle Zusammenstellung der Ereignisse erhalten. Filterregeln und ihre Anwendung wurden schon ausführlich
erforscht und sollen nicht Gegenstand dieser Arbeit sein. Deshalb fanden sie auch keinen Eingang in die weiter unten beschriebene
Simulationsumgebung. Sie erweitern die Möglichkeiten des Systems lediglich, haben aber keinen Einfluss auf das Grundkonzept (um das es hier geht).
Unser System \pubsubrss könnte mit bestehenden Pub/Sub-Systemen, welche Filtertechniken unterstützen (wie z. B. das System
REBECA \cite{MuFiBu:2001:ArchFrameECommApp}), kombiniert werden.\\
\todo{Hier folgen noch Bezüge zur geplanten Übersicht über Filter im 1. Kapitel}

Um sich dem entsprechenden Broker bekannt zu machen und Filter zu hinterlegen, muss sich ein Subscriber beim Broker mit einer speziellen Registrierungsnachricht
registrieren.
Ein Broker braucht nur an diejenigen Subscriber aktuelle Feeds übermitteln, welche auch tatsächlich online sind. Zusätzlich ist es also notwendig,
dass ein Subscriber in regelmäßigen Zeitabständen den jeweiligen Broker über seinen Online-Status unterrichtet (nennen wir eine solche Nachrichten
``Ping-Nachricht''). Erhält ein Broker eine Ping-Nachricht eines Subscribers, für den er den Zustand ``ist offline'' gespeichert hat, sollte er diesem eine
Zusammenstellung der aktuellsten Ereignisse übermitteln. Denn kommt es aufgrund von Störungen im physischen Netzwerk oder aufgrund von Netzüberlastung
zu verloren gegangenen Ping-Nachrichten, so gilt der Subscriber für seinen Broker als ``offline'', dieser wird ihm daraufhin keine Feeds mehr übermitteln.
Hat der Subscriber aufgrund von adaptiven Maßnahmen seine aktuelle Polling-Periode stark angehoben, so wird er zunächst keine weiteren Feeds beim
entsprechenden RSS-Server selbständig erfragen, so dass ihm eventuell Informationen verloren gehen. Die Menge verloren gegangener Informationen
kann geringer gehalten werden, wenn dem Subscriber die letzten Ereignisse bei Wiedereintritt in das Overlay-Netzwerk als Feed übermittelt werden.
Entsprechend sollte ein Subscriber seinen jeweiligen Broker darüber informieren, wenn er offline geht, um unnötigen Datentransfer zu vermeiden.\\

Im Zusammenhang mit Brokern werden noch einige weitere Maßnahmen und Nachrichtentypen vonnöten sein, auf die wir jedoch erst in späteren Kapiteln zu sprechen
kommen werden, da sie Anpassungen an spezielle Bedürfnisse darstellen (siehe Kapitel ``Churn'' \ref{cs:churn}) .